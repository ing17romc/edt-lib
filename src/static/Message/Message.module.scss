@use '../../styles/palette' as *;
@use '../../styles/typography' as *;
@use '../../styles/spacing' as *;
@use 'sass:color';


// Variables
$message-padding: $space-4; // 1rem (16px)
$message-border-radius: $space-1; // 0.25rem (4px)
$message-border-width: 4px;
$message-icon-size: 1.5rem; // 24px
$message-close-size: 1.25rem; // 20px
$message-transition: all 0.3s ease-in-out;

// Colores específicos para el componente Message
$message-colors: (
  'success': (
    'bg': color.adjust($success-color, $lightness: 45%),
    'border': $success-color,
    'text': color.adjust($success-color, $lightness: -20%),
    'icon': $success-color
  ),
  'info': (
    'bg': color.adjust($info-color, $lightness: 45%),
    'border': $info-color,
    'text': color.adjust($info-color, $lightness: -20%),
    'icon': $info-color
  ),
  'warning': (
    'bg': color.adjust($warning-color, $lightness: 45%),
    'border': $warning-color,
    'text': color.adjust($warning-color, $lightness: -20%),
    'icon': $warning-color
  ),
  'danger': (
    'bg': color.adjust($danger-color, $lightness: 45%),
    'border': $danger-color,
    'text': color.adjust($danger-color, $lightness: -10%),
    'icon': $danger-color
  )
);

.message {
  position: relative;
  padding: $message-padding;
  margin-bottom: $space-4;
  border-radius: $message-border-radius;
  font-family: $font-family-base;
  font-size: $font-size-md;
  line-height: $line-height-md;
  transition: $message-transition;
  overflow: hidden;
  
  // Contenido del mensaje
  &Content {
    display: flex;
    align-items: flex-start;
    gap: $space-3;
    position: relative;
    color: $text-color;
  }
  
  // Icono del mensaje
  &Icon {
    flex: 0 0 $message-icon-size;
    width: $message-icon-size;
    height: $message-icon-size;
    margin-top: $space-1; // Usando $space-1 (4px) en lugar de $space-0-5 que no existe
    
    svg {
      width: 100%;
      height: 100%;
    }
  }
  
  // Cuerpo del mensaje
  &Body {
    flex: 1;
    min-width: 0; // Evita desbordamiento en flex
    
    // Título del mensaje
    &Title {
      font-weight: $font-weight-semibold;
      margin: 0 0 $space-2;
      font-size: $font-size-md;
    }
    
    // Texto del mensaje
    &Text {
      margin: 0;
      font-size: $font-size-md;
      line-height: $line-height-md;
    }
  }
  
  // Título del mensaje
  &Title {
    display: block;
    font-weight: $font-weight-semibold;
    margin-bottom: $space-2;
    line-height: $line-height-sm;
  }
  
  // Texto del mensaje
  &Text {
    p {
      margin: 0;
      
      & + p {
        margin-top: $space-2;
      }
    }
  }
  
  // Botón de cierre
  &CloseButton {
    flex: 0 0 auto;
    background: none;
    border: none;
    padding: 0;
    margin: 0 0 0 $space-2;
    cursor: pointer;
    width: $message-close-size;
    height: $message-close-size;
    opacity: 0.6;
    transition: opacity 0.2s ease;
    color: inherit;
    display: flex;
    align-items: center;
    justify-content: center;
    
    &:hover,
    &:focus {
      opacity: 1;
      outline: none;
    }
    
    svg {
      width: 100%;
      height: 100%;
    }
  }
  
  // Estilos para cada tipo de mensaje
  &-success {
    background-color: rgba($success-color, 0.08);
    color: color.adjust($success-color, $lightness: -25%);
    border-left: $message-border-width solid $success-color;
    
    .messageIcon {
      color: $success-color;
    }
  }
  
  &-info {
    background-color: rgba($info-color, 0.08);
    color: color.adjust($info-color, $lightness: -35%);
    border-left: $message-border-width solid $info-color;
    
    .messageIcon {
      color: $info-color;
    }
  }
  
  &-warning {
    background-color: rgba($warning-color, 0.08);
    color: color.adjust($warning-color, $lightness: -35%);
    border-left: $message-border-width solid $warning-color;
    
    .messageIcon {
      color: $warning-color;
    }
  }
  
  &-danger {
    background-color: rgba($danger-color, 0.08);
    color: color.adjust($danger-color, $lightness: -25%);
    border-left: $message-border-width solid $danger-color;
    
    .messageIcon {
      color: $danger-color;
    }
  }
  
  // Estado de hover para mensajes cerrables
  &.closable {
    padding-right: $space-10; // Espacio para el botón de cierre
    
    &:hover {
      .messageCloseButton {
        opacity: 0.8;
      }
    }
  }
  
  // Animación de entrada/salida
  &-enter {
    opacity: 0;
    transform: translateY(10px);
  }
  
  &-enter-active {
    opacity: 1;
    transform: translateY(0);
    transition: $message-transition;
  }
  
  &-exit {
    opacity: 1;
    transform: translateY(0);
  }
  
  &-exit-active {
    opacity: 0;
    transform: translateY(-10px);
    transition: $message-transition;
  }
}

// Modo oscuro
[data-theme='dark'] {
  .message {
    &-success {
      background-color: rgba($success-color, 0.15);
      color: color.adjust($success-color, $lightness: 10%);
    }
    
    &-info {
      background-color: rgba($info-color, 0.15);
      color: color.adjust($info-color, $lightness: 10%);
    }
    
    &-warning {
      background-color: rgba($warning-color, 0.15);
      color: color.adjust($warning-color, $lightness: 10%);
    }
    
    &-danger {
      background-color: rgba($danger-color, 0.15);
      color: color.adjust($danger-color, $lightness: 10%);
    }
  }
}
